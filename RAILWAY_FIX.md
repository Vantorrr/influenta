# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è –Ω–∞ Railway

## –ü—Ä–æ–±–ª–µ–º–∞
Railway –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ `/app/backend/dist/main` –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. Build –Ω–µ –ø—Ä–æ—à–µ–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–µ–≤–µ—Ä–Ω—ã–π

## –†–µ—à–µ–Ω–∏–µ - –ï–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ß—Ç–æ —è –∏—Å–ø—Ä–∞–≤–∏–ª:

1. **–£–¥–∞–ª–∏–ª –ª–∏—à–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏** (railway.json, railway.toml)
2. **–°–æ–∑–¥–∞–ª nixpacks.toml** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
3. **–û–±–Ω–æ–≤–∏–ª package.json** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
4. **–ò—Å–ø—Ä–∞–≤–∏–ª Procfile** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ main.js

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. Railway –∑–∞–ø—É—Å–∫–∞–µ—Ç `npm install` –≤ –∫–æ—Ä–Ω–µ
2. `postinstall` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ backend
   - –°–æ–±–∏—Ä–∞–µ—Ç backend (`npm run build`)
3. Railway –∑–∞–ø—É—Å–∫–∞–µ—Ç `npm start`
4. Backend —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π PORT

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å:

1. **–ó–∞–∫–æ–º–º–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```bash
git add .
git commit -m "Fix Railway deployment - single app configuration"
git push
```

2. **–í Railway:**
   - –£–¥–∞–ª–∏ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–∏—Å
   - –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π deployment
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç nixpacks.toml

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway:**
```env
# Database (–æ—Ç Railway Postgres)
DATABASE_URL=${{Postgres.DATABASE_URL}}

# App
NODE_ENV=production
JWT_SECRET=your_super_secret_jwt_key_here
JWT_EXPIRES_IN=7d

# Telegram
TELEGRAM_BOT_TOKEN=7539463116:AAE97MAcGffyANYVGOWoGT1qKmNiPPTVWpg
TELEGRAM_BOT_NAME=InfluentaBot
ADMIN_TELEGRAM_IDS=741582706,8141463258

# Frontend (–≤—Å—Ç—Ä–æ–µ–Ω –≤ backend)
FRONTEND_URL=https://${{RAILWAY_PUBLIC_DOMAIN}}
```

### Frontend –∫–∞–∫ —Å—Ç–∞—Ç–∏–∫–∞

–°–µ–π—á–∞—Å backend –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ API. –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ª–∏–±–æ:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–¥–µ–ª—å–Ω—ã–π frontend —Å–µ—Ä–≤–∏—Å** (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)
- –°–æ–∑–¥–∞–π –≤—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–∏—Å –≤ Railway –¥–ª—è frontend
- –£–∫–∞–∂–∏ root directory: `frontend`

**–í–∞—Ä–∏–∞–Ω—Ç 2: Backend —Ä–∞–∑–¥–∞–µ—Ç frontend** 
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ backend –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞:

–ü—Ä–æ–≤–µ—Ä—å –≤ Railway logs:
1. –ü—Ä–æ—à–ª–∞ –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
2. –ü—Ä–æ—à–ª–∞ –ª–∏ —Å–±–æ—Ä–∫–∞ (`npm run build`)
3. –ï—Å—Ç—å –ª–∏ –ø–∞–ø–∫–∞ `backend/dist`

–ú–æ–∂–µ—à—å —Ç–∞–∫–∂–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:
```toml
# nixpacks.toml - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
[phases.build]
cmd = "cd backend && npm ci && npm run build"

[start]
cmd = "cd backend && npm run start:prod"
```

